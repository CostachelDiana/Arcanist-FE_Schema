  <div class="card card-body" *ngIf="!this.isPageReady()">
		<button class="btn btn-primary" type="button" (click)="onGeneratePageClick()"> Generate Search Options</button>
	</div>    
	<main role="main" *ngIf="this.isPageReady()">
    <div class="card card-body">
      <p>Name: 
        <mat-form-field appearance="fill"><mat-label>Capture name</mat-label>
          <input matNativeControl #box name="searchName" value="{{this.searchParameters.searchName}}" (blur)= "this.searchParameters.searchName = box.value"/>
        </mat-form-field>
      </p>
    </div>
    <div>
      <h4 class="font-weight-bold">Filters Section</h4>
      <hr style="height:2px;border:none;color:#55;background-color:#333;" />
      <div class="card card-body">
        <h4 class="font-weight-bold">Basic Details</h4>
        <hr style="height:2px;border:none;color:#55;background-color:#333;" />
        <hr/>      
        <table><tr>
          <td><table>
            <tr>
              <td>CD Protocol:</td>
              <td>
                <mat-form-field appearance="fill"><mat-label>X2 Protocol</mat-label>
                  <select matNativeControl (change)="this.onCdProtocolOptionsChanged($event)">
                    <option style="display:none"></option>
                    <option *ngFor="let p of this.typesInfo.capX2Protos; let i = index" [value]="this.typesInfo.capX2Protos[i].id">
                      {{this.typesInfo.capX2Protos[i].displayName}}
                    </option>
                  </select>
                </mat-form-field>
              </td>
            </tr>
            <tr>
              <td>CC Protocol:</td>
              <td>
                <mat-form-field appearance="fill"><mat-label>X3 Protocol</mat-label>
                  <select matNativeControl (change)="this.onCcProtocolOptionsChanged($event)">
                    <option style="display:none"></option>
                    <option *ngFor="let p of this.typesInfo.capX3Protos; let i = index" [value]="this.typesInfo.capX3Protos[i].id">
                      {{this.typesInfo.capX3Protos[i].displayName}}
                    </option>
                  </select>
                </mat-form-field>
              </td>
            </tr>
            <tr>
              <td>Technology:</td>
              <td>
                <mat-form-field appearance="fill"><mat-label>Technology</mat-label>
                  <select matNativeControl (change)="this.onTechnologiesOptionsChanged($event)">
                    <option style="display:none"></option>
                    <option *ngFor="let p of this.typesInfo.capTechnologyTypes; let i = index" [value]="this.typesInfo.capTechnologyTypes[i].id">
                      {{this.typesInfo.capTechnologyTypes[i].displayName}}
                    </option>
                  </select>
                </mat-form-field>
              </td>
            </tr>        
          </table></td>
          <td><table>
            <tr>
              <td><mat-label>Duration (seconds):</mat-label></td>
              <td>
                <mat-form-field appearance="fill"><mat-label>Min</mat-label>
                  <input matNativeControl #boxDurationMin name="durationMin" type="number" value="{{this.searchParameters.durationMin}}" 
                    (blur)= "this.searchParameters.durationMin = boxDurationMin.value"/>
                </mat-form-field>
              </td>
              <td>
                <mat-form-field appearance="fill"><mat-label>Max</mat-label>
                  <input matNativeControl #boxDurationMax name="durationMax" type="number" value="{{this.searchParameters.durationMax}}" 
                    (blur)= "this.searchParameters.durationMax = boxDurationMax.value"/>
                </mat-form-field>
              </td>
            </tr>
            <tr>
              <td><mat-label>Switch Time:</mat-label></td>
              <td>
                <mat-form-field appearance="fill"><mat-label>Min</mat-label>
                  <input matNativeControl matInput [matDatepicker]="picker">
                  <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                  <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>
              </td>
              <td>
                <mat-form-field appearance="fill"><mat-label>Max</mat-label>
                  <input matNativeControl matInput [matDatepicker]="picker">
                  <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                  <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>
              </td>              
            </tr>
            <tr>
              <td><mat-label>Last Update:</mat-label></td>
              <td>
                <mat-form-field appearance="fill"><mat-label>Min</mat-label>
                  <input matNativeControl matInput [matDatepicker]="picker">
                  <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                  <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>
              </td>
              <td>
                <mat-form-field appearance="fill"><mat-label>Max</mat-label>
                  <input matNativeControl matInput [matDatepicker]="picker">
                  <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                  <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>
              </td>              
            </tr>
          </table></td>
          <td><table>
            <tr>
              <td>Status:</td>
              <td colspan="2" class="text-left">
                <mat-form-field appearance="fill"><mat-label>Status</mat-label>
                  <select matNativeControl (change)="this.onStatusOptionsChanged($event)">
                    <option style="display:none"></option>
                    <option *ngFor="let p of this.typesInfo.capStatusTypes; let i = index" [value]="this.typesInfo.capStatusTypes[i].id">
                      {{this.typesInfo.capStatusTypes[i].displayName}}
                    </option>
                  </select>
                </mat-form-field>
              </td>
            </tr>
            <tr>
              <td>References:</td>
              <td>
                <mat-form-field appearance="fill"><mat-label>Min</mat-label>
                  <input matNativeControl #boxReferencesMin name="referencesMin" type="number" value="{{this.searchParameters.referencesMin}}" (blur)= "this.searchParameters.referencesMin = boxReferencesMin.value"/>
                </mat-form-field>
              </td>
              <td>
                <mat-form-field appearance="fill"><mat-label>Max</mat-label>
                  <input matNativeControl #boxReferencesMax name="referencesMax" type="number" value="{{this.searchParameters.referencesMax}}" (blur)= "this.searchParameters.referencesMax = boxReferencesMax.value"/>
                </mat-form-field>
              </td>
            </tr>
            <tr>
              <td>Projects:</td>
              <td>
                <mat-form-field appearance="fill"><mat-label>Min</mat-label>
                  <input matNativeControl #boxProjectsMin name="projectsMin" type="number" value="{{this.searchParameters.projectsMin}}" (blur)= "this.searchParameters.projectsMin = boxProjectsMin.value"/>
                </mat-form-field>
              </td>
              <td>
                <mat-form-field appearance="fill"><mat-label>Max</mat-label>
                  <input matNativeControl #boxProjectsMax name="projectsMax" type="number" value="{{this.searchParameters.projectsMax}}" (blur)= "this.searchParameters.projectsMax = boxProjectsMax.value"/>
                </mat-form-field>
              </td>
            </tr>                      
          </table></td>
        </tr></table>
      </div>
      <div class="card card-body">
        <h4 class="font-weight-bold">Capture Info <button class="btn btn-primary" type="button" (click)="this.onAddCaptureInfoClick()" > Add </button> </h4>
        <hr style="height:2px;border:none;color:#55;background-color:#333;" />
        <p> Target IC: 
          <mat-form-field appearance="fill"><mat-label>IC Type</mat-label>
            <select matNativeControl (change)="this.onTargetICOptionsChanged($event)">
              <option style="display:none"></option>
              <option *ngFor="let p of this.typesInfo.capICTypes; let i = index" [value]="this.typesInfo.capICTypes[i].id">
                {{this.typesInfo.capICTypes[i].displayName}}
              </option>
            </select>
          </mat-form-field>
        </p>
        <ul style="list-style:none">						
          <li style="display:inline" *ngFor="let info of this.searchParameters.capInfos; let idx = index">
            <button class="btn btn-secondary btn-sm" type="button" (click)="this.onRemoveCaptureInfoClick(idx)"> X</button>
            &nbsp;
              <span style="font-weight:bold;color: #0000BB">{{info.infoTypeName}}:</span> {{info.infoValName}}
              &nbsp;
              &nbsp;
          </li>
        </ul>
      </div>
      <div class="card card-body">
        <h4 class="font-weight-bold">Capture Tags <button class="btn btn-primary" type="button" (click)="this.onAddCaptureTagClick()" > Add  </button> </h4>
        <hr style="height:2px;border:none;color:#55;background-color:#333;" />
        <ul style="list-style:none">
          <li style="display:inline" *ngFor="let tg of this.searchParameters.capTags; let idx = index">
            <button class="btn btn-secondary btn-sm" type="button" (click)="this.onRemoveCaptureTagClick(idx)"> X</button>
            {{tg.tagName}}
            &nbsp;
            &nbsp;
          </li>
        </ul>
      </div>
    </div>
    <div class="card card-body">
      <h4 class="font-weight-bold" ><button class="btn btn-primary" type="button" (click)="this.onSearchClick()" > Search  </button> </h4>
    </div>
    <div *ngIf="this.searchFinished">
      <h4 class="font-weight-bold">Results Section - Found {{this.searchResults.length}} results ...</h4>
      <hr style="height:2px;border:none;color:#55;background-color:#333;" />
      <table style="margin-left: 30px;border: 2px solid;" *ngFor="let cap of this.searchResults; let idx = index">
        <tr><td style="padding: 20px;">
          <h4 class="font-weight-bold">{{this.searchResults[idx].capName}}</h4>
          <hr style="height:2px;border:none;color:#55;background-color:#333;" />
          <div style="margin-left: 30px;">
            <table cols="3" rows="4" style="margin-left: 30px;">
              <tr>
                <td style="padding: 10px;">CC: {{this.searchResults[idx].capX3Protocol}}</td>
                <td style="padding: 10px;">CD: {{this.searchResults[idx].capX2Protocol}}</td>
                <td style="padding: 10px;">Switch Time: {{this.searchResults[idx].capSwitchDate}}</td>
                <td style="padding: 10px;">Status: {{this.searchResults[idx].capStatus.displayName}}</td>
              </tr>
              <tr>
                <td style="padding: 10px;">Technology: {{this.searchResults[idx].capTechnology.displayName}}</td>
                <td style="padding: 10px;">Length: {{this.searchResults[idx].capLength}}</td>
                <td style="padding: 10px;">Last Updated: {{this.searchResults[idx].lastUpdateDate}}</td>
                <td style="padding: 10px;">Used in: {{this.searchResults[idx].getCaptureProjsNumber()}} projects</td>
              </tr>  
              <tr>
                <td style="padding: 10px;">&nbsp;</td>
                <td style="padding: 10px;">&nbsp;</td>
                <td style="padding: 10px;">&nbsp;</td>
                <td style="padding: 10px;">Has: {{this.searchResults[idx].getCaptureRefNumber()}} references</td>
              </tr>        
            </table>
            <hr style="height:2px;border:none;color:#55;background-color:#333;" />
            <ul style="list-style:none">
              <li style="display:inline" *ngFor="let tg of this.searchResults[idx].capTags">
                Tag: {{tg.tagName}}
                &nbsp;
                &nbsp;
              </li>
              <li style="display:inline" *ngFor="let info of this.searchResults[idx].capInfos">
                {{info.infoTypeName}}: {{info.infoValName}}
                &nbsp;
                &nbsp;
              </li>
            </ul>
          </div>
        </td></tr>
      </table>
    </div>
  </main>
